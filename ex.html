<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AC / Non-AC Checkbox</title>
    <style>
        /* CSS for styling the checkboxes */
        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }

        label {
            font-family: Arial, sans-serif;
            font-size: 16px;
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <h1>Select Room Type</h1>

    <!-- AC Checkbox -->
    <label>
        <input type="checkbox" id="acCheckbox" />
        AC
    </label>

    <!-- Non-AC Checkbox -->
    <label>
        <input type="checkbox" id="nonAcCheckbox" />
        Non-AC
    </label>

    <!-- Message Area -->
    <p id="statusMessage" style="font-family: Arial, sans-serif; color: gray;"></p>

    <!-- JavaScript -->
    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            const acCheckbox = document.getElementById("acCheckbox");
            const nonAcCheckbox = document.getElementById("nonAcCheckbox");
            const statusMessage = document.getElementById("statusMessage");
            let Specialization;
            // Fetch employee ID from localStorage
            const eid = localStorage.getItem("eid");
            console.log("Employee ID:", eid);

            // Define the API URL using the employee ID
            const url = `https://m4j8v747jb.execute-api.us-west-2.amazonaws.com/dev/employee/get/${eid}`;

            // Function to fetch room type from API
            async function fetchRoomType() {
                try {
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`Failed to fetch room type: ${response.statusText}`);
                    }
                    const data = await response.json();
                    console.log("API Response:", data); // Log the response for debugging
                    Specialization = data.employee_status
                    console.log(Specialization)
                    return data.roomType; // Assume API returns { roomType: 1 } or { roomType: 0 }
                } catch (error) {
                    console.error("Error fetching room type:", error);
                    return null; // Handle error gracefully
                }
            }



            // Fetch the room type from the API
            const roomType = await fetchRoomType()
            if (roomType !== null) {
                console.log(Specialization)
                // Automatically tick the corresponding checkbox based on 1 (AC) or 0 (Non-AC)
                if (Specialization === "Active") {
                    acCheckbox.checked = true;
                    statusMessage.textContent = "AC room selected.";
                } else if (Specialization === "Non Active") {
                    nonAcCheckbox.checked = true;
                    statusMessage.textContent = "Non-AC room selected.";
                } else {
                    statusMessage.textContent = "Unknown room type received.";
                }
            } else {
                statusMessage.textContent = "Failed to load room type.";
            }
        });
    </script>
</body>

</html>