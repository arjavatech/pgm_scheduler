<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/register.css">
    <link rel="stylesheet" href="css/nav.css">
    <!-- Custom CSS -->
    <style>
        .modal-header {
            background-image: radial-gradient(#004102, #131313);
        }

        .modal {
            width: 100%;
        }

        .modal-header h5 {
            color: white;
        }

        @media (max-width:996px) {
            #header{
                display: none !important;
            }

            #fix{
                margin-top: 15%;
            }
        }
    </style>

<body>
    <div id="nav">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="col-4">
                <img src="images/icons8-menu-bar-64.png" alt="" class="sidebar-toggle img-fluid" id="sidebarToggle" style="width: 20%;">
            </div>
            <div class="col-4 text-center">
                <img src="images/logo.png" alt="Logo" id="logo" style="max-width: 100%;">
            </div>
            <div class="col-4 text-end">
                <img src="icon/Mask group.png" alt="Profile Icon" style="max-width: 100%;">
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="container">
                <div class="row">
                    <!-- Sidebar -->
                    <div class="col-sm-12 col-xl-2 col-md-2 col-lg-2 col-sty" id="left">
                        <!-- Sidebar -->
                        <div id="sidebar">
                            <div id="sidebar-header" class="m-3 mb-5">
                                <img src="images/logo.png" alt="Sidebar Logo" style="width: 100%;">
                            </div>
                            <div id="sidebar-content">
                                <div class="list-group list-group-flush">
<<<<<<< HEAD
                                    <a href="dashboard.html"
                                        class="list-group-item list-group-item-action bg-purple"><img
                                            src="icon/Mask group-2.png" style="width: 25px;margin-top: -5px;"><span
                                            style="padding-left: 10px;color: white;">Dashboard</span></a>
                                    <a class="list-group-item list-group-item-action bg-purple dropdown-toggle" href="#"
                                        id="ticketMenu" data-bs-toggle="collapse" data-bs-target="#ticketSubmenu"
                                        aria-expanded="false" aria-controls="ticketSubmenu">
                                        <img src="icon/Mask group-3.png" style="width: 25px;margin-top: -5px;">
                                        <span style="padding-left: 10px;color: white;">Ticket</span>
                                    </a>

                                    <div id="ticketSubmenu" class="collapse">
                                        <ul class="list-group list-group-flush" id="list-group-flush">
                                            <li class="list-group-item"><a href="Unassigned.html">Unassigned Tickets</a>
                                            </li>
                                            <li class="list-group-item"><a href="Inprocess.html"
                                                    class=" bg-purple">In-Progress</a></li>
                                            <li class="list-group-item"><a href="invoice.html"
                                                    class=" bg-purple">ReadyForInvoice</a></li>
                                            <li class="list-group-item"><a href="completed.html">Completed Ticket</a>
                                            </li>
                                            <li class="list-group-item"><a href="RejectedTicket.html">RejectedTicket</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <a href="employee_ticket.html"
                                        class="list-group-item list-group-item-action bg-purple"><img
                                            src="icon/Mask group.png" style="width: 30px;margin-top: -5px;"><span
                                            style="padding-left: 10px;color: white;">Employees</span></a>
                                    <a href="home-profile.html"
                                        class="list-group-item list-group-item-action bg-purple"><img
                                            src="icon/Mask group-1.png" style="width: 30px;margin-top: -5px;"><span
                                            style="padding-left: 10px;color: white;">Profile</span></a>
=======
                                    <a href="#" class="list-group-item list-group-item-action bg-purple"><span style="padding-left: 10px;color: white;">Dashboard</span></a>
                                    <a href="#" class="list-group-item list-group-item-action bg-purple"><span style="padding-left: 10px;color: white;">Register</span></a>
                                    <a href="company.html" class="list-group-item list-group-item-action bg-purple"><span style="padding-left: 10px;color: white;">Companies</span></a>
>>>>>>> 2bc8ef3 (company page changes)
                                    <div style="position: fixed; bottom: 0; display: inline-flex;" class="m-3">
                                        <img src="icon/Vector.png" id="icon">
                                        <span class="content text-white list-group-item">Logout</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Content -->
                    <div class="col-sm-12 col-xl-10 col-md-12 col-lg-10 col-sty" id="fix">
                        <p id="header"
                            style="box-shadow: 0px 10px 10px 0px rgba(0, 0, 0, 0.5);margin-left: -12px;padding: 20px;margin-right: -12px;font-weight: bold;">
                            Employee <span class="span" style="float: inline-end;">XYZ Company <img
                                    src="icon/Mask group (2).png" alt="" style="width: 40px;padding-left: 10px;"></span>
                        </p>
                        <div class="container container-sty text-center">
                            <h2 class="text-center m-3 fw-bold">Register</h2>
                            <div class="container-form">
                                <form id="registerForm">
                                    <input type="text" class="form-control" id="companyName" placeholder="Company Name*"
                                        required>


                                    <div class="inline-fields">
                                        <input type="text" class="form-control" id="firstName" placeholder="First Name*"
                                            required>
                                        <input type="text" class="form-control" id="lastName" placeholder="Last Name*"
                                            required>
                                    </div>

                                    <input type="email" class="form-control" id="email" placeholder="Email*" required>
                                    <input type="tel" class="form-control" id="phone" placeholder="Phone Number*"
                                        required>

                                    <div class="submit-btn-container">
                                        <button type="submit" class="submit-btn" id="submit-btn">Submit</button>
                                    </div>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Function to show the logout (failure) modal
        function showLogoutModal() {
            const modalHTML = `
            <div class="modal fade" id="failModal" tabindex="-1" aria-labelledby="failModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="failModalLabel">Failed</h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body d-flex justify-content-center ">
                            <img src="images/fail image.png"  style="width:70%">
                        </div>
                    </div>
                </div>
            </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            const modalElement = document.getElementById('failModal');
            const modalInstance = new bootstrap.Modal(modalElement);
            modalInstance.show();
        }

        // Function to show the success modal
        function showSuccessModal() {
            const modalHTML = `
            <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="successModalLabel">Success</h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body d-flex justify-content-center ">
                            <img src="images/sucess.png"  style="width:70%">
                        </div>
                    </div>
                </div>
            </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            const modalElement = document.getElementById('successModal');
            const modalInstance = new bootstrap.Modal(modalElement);
            modalInstance.show();
        }

        document.getElementById('submit-btn').addEventListener('click', function (event) {
            event.preventDefault();

            // Gather input values
            const data = {
                company_name: document.getElementById('companyName').value,
                phone_number: document.getElementById('phone').value.toString(),
                first_name: document.getElementById('firstName').value,
                last_name: document.getElementById('lastName').value,
                email: document.getElementById('email').value
            };

            console.log(data);

            fetch("https://m4j8v747jb.execute-api.us-west-2.amazonaws.com/dev//company_register/create", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Error: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.error) {
                        showLogoutModal();  // Show failure modal
                    } else {
                        showSuccessModal();  // Show success modal
                        setTimeout(function () {
                            window.location.href = 'company.html';  // Redirect after success
                        }, 1000);
                    }
                })
                .catch(error => {
                    showLogoutModal();  // Show failure modal on error
                    console.error('Error:', error);
                });
        });

        document.getElementById('sidebarToggle').addEventListener('click', function () {
            var sidebar = document.getElementById('left');
            sidebar.classList.toggle('active');
        });
        
            // document.getElementById('submit-btn').addEventListener('click', function(event){
            
            //     event.preventDefault();
            //     // Gather input values
            //     const data = {
            //         company_name: document.getElementById('companyName').value,
            //         phone_number: document.getElementById('phone').value.toString(),
            //         first_name: document.getElementById('firstName').value,
            //         last_name: document.getElementById('lastName').value,
            //         email: document.getElementById('email').value
            //     };

            //     fetch("https://m4j8v747jb.execute-api.us-west-2.amazonaws.com/dev/company_register/create", {
            //     method: 'POST',
            //     body: JSON.stringify(data)
            //      })
            //     .then(response => {
            //         if (!response.ok) {
            //             throw new Error(`Error: ${response.status}`);
            //         }
            //         return response.json();
            //     })
            //     .then(data => {
            //         console.log(data)
            //         if (data.error) {
            //             setTimeout(function () {
            //                 window.location.href = "register.html";
            //             }, 1000);
            //         } else {
                        
            //             popupModal.style.display = 'block';
            //             mainContent.classList.add('blur-background');
            //             setTimeout(function () {
            //                 // $('#popupModal').hide(); 
            //                 // $('#mainContent').removeClass('blur-background'); 
            //                 window.location.href = 'company.html';
            //             }, 1000);
            //         }

            //     })
            //     .catch(error => {
            //         console.error('Error:', error);
            //     });
            //    });
    </script>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>



</body>

</html>